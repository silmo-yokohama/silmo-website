---
description: タスク遂行時のエラーを記録
globs: 
alwaysApply: false
---
# Project Risk

## 目的

このプロジェクトでのタスク実行時、重要な障害が発生した場合、その問題の内容と解決案を記録する。
下記条件に従って処理してください。

## 概要

このプロジェクトでの問題発生と解決方法を記録する。

- タスク遂行の継続が不可能なエラーや問題に当たった際、問題の内容と解決方法をログとして残す。
- エラーの内容、解決のために試した全てのアクションの記録、原因の記録を目的とする。
- 軽度な障害はここには記録しない。

## 制約

- 各タスク実行時、エラーや障害を発見した場合、`docs/ai/risk/{YYYYmmdd}_{障害名}.md`を作成する。
  - YYYYmmddには日付を入力すること（例：20240615）。
  - 日付は`date +%Y%m%d`コマンドを実行して日時情報を取得すること。
- このファイルには以下の内容を記載する。
  ```markdown
  # 障害: [障害名]
  
  ## 発生日時
  [YYYY/MM/DD HH:MM]
  
  ## 障害内容
  [詳細な障害内容の説明]
  
  ## 解決のために試したこと
  1. [試行1とその結果]
  2. [試行2とその結果]
  
  ## 原因
  [判明した原因の詳細説明]
  
  ## 影響範囲
  [影響を受ける機能やシステム部分の説明]
  
  ## ラベル
  - [ラベル1]
  - [ラベル2]
  
  ## ステータス
  [解決済み/未解決/ペンディング]
  
  ## 関連障害
  - [関連する障害ファイルへのリンク]
  ```
  
  - ラベリングには以下を必要に応じて使用する：
    - インフラ
    - ライブラリ
    - バグ
    - その他、適宜ラベルを作成すること
  - ステータスは以下のいずれかを使用する：
    - 解決済み
    - 未解決
    - ペンディング

- ファイル作成後、`docs/ai/risk/risk.md`にインデックスを作成もしくは更新すること。
  - インデックスには以下の情報を記載する：
    ```markdown
    | 日付 | 障害名 | ステータス | ファイル | 関連課題 |
    |-----|------|----------|-------|--------|
    | YYYY/MM/DD | [障害名] | [ステータス] | [障害ファイルへのリンク] | [関連課題ファイルへのリンク] |
    ```
  - 関連課題へのリンクは`docs/ai/issues/{YYYYmmdd}_{課題名}.md`への参照

- 既に同じ障害が登録済みで、まだ完了になっていない場合はこの処理は全て無視すること。
- 完了になっているにも関わらず、同様の問題が発生した場合は同じ障害のファイルを更新すること。
  - 更新の際は、再発の記録、新たな試行、解決策の評価を追記する。
- 関連のある障害には関連付けをすること（相互参照）。
- 障害ファイル作成およびインデックス更新後、ユーザーに障害の記録を完了した旨を通知すること。

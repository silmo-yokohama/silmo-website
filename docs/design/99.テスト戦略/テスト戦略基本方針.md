# SilMoポートフォリオサイト テスト戦略基本方針

## 1. テストの目的

SilMoポートフォリオサイトのテスト戦略は、以下の目的を持ちます：

- **品質保証**: コードの正確性と信頼性を確保する
- **回帰テスト**: 新機能追加や修正による既存機能への影響を検出する
- **メンテナンス性向上**: 将来の機能拡張や修正を容易にする
- **技術学習**: Vitest、Storybookなどのテスト技術のスキルアップを図る

## 2. テスト範囲

個人開発という特性と開発効率を考慮し、以下の範囲に焦点を当てます：

- **ユーティリティ関数**: データ変換、フォーマット処理などの純粋な関数
- **カスタムフック**: 独自に実装したReactフック
- **UIコンポーネント**: 再利用性の高いUI要素や複雑なコンポーネント
- **重要なビジネスロジック**: CMS連携など、サイトの中核となる処理

## 3. テスト対象外

以下の項目は、コストと効果のバランスを考慮し、原則としてテスト対象から除外します：

- **E2Eテスト**: エンドツーエンドのブラウザテスト
- **レンダリング結果の詳細検証**: スタイルやレイアウトの厳密なテスト
- **サードパーティライブラリ**: 既に十分テストされたライブラリのテスト

## 4. テストの種類と手法

### 4.1 単体テスト (Vitest)

#### 4.1.1 テスト対象と優先度

**最優先（必須）**:
- 複雑なロジックを含む関数
- データ変換・操作を行うユーティリティ
- 重要なカスタムフック

**中優先**:
- API通信関連の関数
- 共通コンポーネントの主要機能
- フォームバリデーションロジック

**低優先**:
- シンプルな表示用コンポーネント
- 外部ライブラリのラッパー関数

#### 4.1.2 テストファイルの配置

テスト対象ファイルと同じディレクトリに直接配置し、ファイル名は`.spec.ts`の形式とします：

```
src/
  lib/
    format-date.ts
    format-date.spec.ts
  components/
    ui/
      button.tsx
      button.spec.tsx
```

### 4.2 コンポーネントテスト (Storybook)

#### 4.2.1 テスト対象と優先度

**最優先（必須）**:
- 共通UIコンポーネント（ボタン、カード、フォーム要素など）
- 複数のバリエーションを持つコンポーネント
- 頻繁に再利用されるコンポーネント

**中優先**:
- ページの主要セクション（ヘッダー、フッターなど）
- 複雑なレイアウトコンポーネント

**低優先**:
- ページ全体のストーリー
- 一度しか使用されないコンポーネント

#### 4.2.2 ストーリーファイルの配置

すべてのストーリーファイルはルートディレクトリ直下の`stories`ディレクトリに統合して配置します：

```
/
  stories/
    ui/
      button.stories.tsx
    layout/
      header.stories.tsx
    pages/
      home.stories.tsx
  src/
    components/
      ui/
        button.tsx
```

## 5. テスト言語の制約

すべてのテストケースとコードコメントは日本語で記述することを基本方針とします。これには以下が含まれます：

- **テスト関数の説明**: `describe`や`it`内のテスト説明文
- **コード内コメント**: テストコード内の実装解説
- **エラーメッセージ**: テスト内で使用するエラーメッセージ
- **ドキュメンテーション**: テストに関連するすべてのドキュメント

ただし、変数名やメソッド名などのコード要素は英語で記述し、コードの可読性と国際的な標準に準拠します。

この制約を厳格に守ることで、プロジェクト全体の一貫性と可読性を高めます。 